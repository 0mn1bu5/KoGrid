---
layout: default
title: Complex Server Side Paging, Sorting, Filtering
---

<script type="text/javascript">
    $(function () {
        var myVM = function () {
            var self = this;

            this.myObsArray = ko.observableArray([]);
            this.currentPage = ko.observable(1);
            this.pageSize = ko.observable(50);
            this.totalServerItems = ko.observable(258);
            this.selectedItem = ko.observable();
            this.sortInfo = ko.observable();
            this.filterInfo = ko.observable();

            //use these shortcuts for example purpose

            var filter = function (data, filterInfo) {

                var mgr = new kg.FilterManager({
                    data: ko.observableArray(data)
                });

                mgr.filterInfo(filterInfo);

                return mgr.filteredData();
            };

            var sort = function (data, sortInfo) {

                var mgr = new kg.SortManager({
                    data: ko.observableArray(data)
                });

                mgr.sortInfo(sortInfo);

                return mgr.sortedData();
            };

            //


            this.getPagedDataAsync = function (pageSize, page, filterInfo, sortInfo) {
                setTimeout(function () {

                    var data = window.getExampleData();

                    var filteredData = filter(data(), filterInfo);

                    var sortedData = sort(filteredData, sortInfo);

                    var pagedData = sortedData.slice((page - 1) * pageSize, page * pageSize);

                    self.myObsArray(pagedData);
                }, 0);
            };


            this.dataChangedTrigger = ko.computed(function () {
                var page = self.currentPage(),
                    pageSize = self.pageSize(),
                    filterInfo = self.filterInfo(),
                    sortInfo = self.sortInfo();

                if (page && pageSize) {
                    self.getPagedDataAsync(pageSize, page, filterInfo, sortInfo);
                }
                return null;
            });
        };

        window.viewModel = new myVM();

        ko.applyBindings(viewModel);

        viewModel.getPagedDataAsync(50, 1, viewModel.filterInfo(), viewModel.sortInfo());
    });
</script>


<div id="sandBox" class="example" style="height: 600px; max-width: 700px;" 
        data-bind="koGrid: { data: myObsArray,
                             columnDefs: [ { field: 'Sku', width: 140 },
                                        { field: 'Vendor', width: 100 },
                                        { field: 'SeasonCode', displayName: 'Season Code', width: 150 },
                                        { field: 'Mfg_Id', displayName: 'Mfg ID', width: 180 },
                                        { field: 'UPC', width: 170 }],
                             autogenerateColumns: false,
                             isMultiSelect: false,
                             enablePaging: true,
                             useExternalFiltering: true,
                             useExternalSorting: true,
                             filterInfo: filterInfo,
                             sortInfo: sortInfo,
                             pageSize: pageSize,
                             pageSizes: [25, 50, 75],
                             currentPage: currentPage,
                             totalServerItems: totalServerItems,
                             selectedItem: selectedItem }">

</div>